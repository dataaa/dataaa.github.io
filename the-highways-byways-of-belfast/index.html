
<head>
	<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0">

	<title>The highways &amp; byways of Belfast</title>
	<meta name="description" content="">

	<link href="http://fonts.googleapis.com/css?family=Lato:400,700,900" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="../assets/css/font-awesome.min.css?v=840c8ff11e">
	<link rel="stylesheet" href="../assets/css/screen.css?v=840c8ff11e">

	<link rel="canonical" href="index.html">
    <meta name="referrer" content="origin">
    
    <meta property="og:site_name" content="dataaa.net">
    <meta property="og:type" content="article">
    <meta property="og:title" content="The highways &amp; byways of Belfast">
    <meta property="og:description" content="The map above shows some of the roads of Belfast, but as defined by the footsteps of its inhabitants. I have plotted over 3,000 running and walking routes as registered by users of the MapMyRun website. The more opaque the line, the more well-trodden the route. This visualisation uses">
    <meta property="og:url" content="http://localhost:2368/the-highways-byways-of-belfast/">
    <meta property="og:image" content="http://localhost:2368/content/images/2015/08/mmrBelfast-1.png">
    <meta property="article:published_time" content="2015-08-07T21:12:52.813Z">
    <meta property="article:modified_time" content="2015-08-07T21:20:30.515Z">
    <meta property="article:tag" content="maps">
    <meta property="article:tag" content="Belfast">
    <meta property="article:tag" content="GPS">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="The highways &amp; byways of Belfast">
    <meta name="twitter:description" content="The map above shows some of the roads of Belfast, but as defined by the footsteps of its inhabitants. I have plotted over 3,000 running and walking routes as registered by users of the MapMyRun website. The more opaque the line, the more well-trodden the route. This visualisation uses">
    <meta name="twitter:url" content="http://localhost:2368/the-highways-byways-of-belfast/">
    <meta name="twitter:image:src" content="http://localhost:2368/content/images/2015/08/mmrBelfast-1.png">
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "dataaa.net",
    "author": {
        "@type": "Person",
        "name": "Paul W",
        "url": "http://localhost:2368/author/paul/"
    },
    "headline": "The highways &amp; byways of Belfast",
    "url": "http://localhost:2368/the-highways-byways-of-belfast/",
    "datePublished": "2015-08-07T21:12:52.813Z",
    "dateModified": "2015-08-07T21:20:30.515Z",
    "image": "http://localhost:2368/content/images/2015/08/mmrBelfast-1.png",
    "keywords": "maps, Belfast, GPS",
    "description": "The map above shows some of the roads of Belfast, but as defined by the footsteps of its inhabitants. I have plotted over 3,000 running and walking routes as registered by users of the MapMyRun website. The more opaque the line, the more well-trodden the route. This visualisation uses"
}
    </script>

    <meta name="generator" content="Ghost 0.7">
    <link rel="alternate" type="application/rss+xml" title="dataaa.net" href="../rss/index.html">
</head>
<body class="post-template tag-maps tag-belfast tag-gps">

	

<nav>
	<div class="toggle-menu">
	    <div id="icon">
	        <div class="one"></div>
	        <div class="two"></div>
	        <div class="three"></div>
			<div class="four"></div>
	    </div>

	    <div id="menu">
	        <ul>
		    <li>
					<a href="http://www.linkedin.com/in/paulmwoods"><span><i class="fa fa-linkedin"></i></span> Linkedin</a>
	        </li>
		    <li>
	            	<a href="http://www.twitter.com/dr_paul_woods"><span><i class="fa fa-twitter"></i></span> Twitter</a> 
	            </li>
	            <li>
	            	<a href="http://www.github.com/dataaa"><span><i class="fa fa-github"></i></span> Github</a>
	            </li>
	            <li>
	            	<a href="../rss/index.rss"><span><i class="fa fa-rss"></i></span> RSS</a>
	            </li>                
	        </ul>
	    </div> 
	 </div>
</nav>

<header class="main-header " style="background-image: url(../content/images/2015/06/dataaa_darkness-2.jpg)">
	<figure class="logo">
		<a href="../"><img class="img-logo" src="../content/images/2015/06/dataaa_logo_trim.png" alt="Blog logo: Dataaa"></a>
	</figure>
	<div class="title">
		<a href="../">
			<h1>dataaa.net</h1>
		</a>
		<p>Technical musings of Paul Woods</p>
	</div>
</header>

<section class="posts">

		<article class="post tag-maps tag-belfast tag-gps">
			<div class="inner">
				<header class="header-post">
					<span class="meta-post">
						<time datetime="2015-08-07">07 Aug 2015</time>
					</span>
					<h2 class="title-post">The highways &amp; byways of Belfast</h2>
				</header>
				
				<section class="content-post">
					<p><img src="../content/images/2015/08/mmrBelfast.png" alt="Map of Belfast defined by its runners"></p>

<p>The map above shows some of the roads of Belfast, but as defined by the footsteps of its inhabitants. I have plotted over 3,000 running and walking routes as registered by users of the MapMyRun website. The more opaque the line, the more well-trodden the route.</p>

<p>This visualisation uses GPS tracks from wearables or routes manually input via the MapMyRun website. Obtaining these GPS tracks (as .gpx files) can be tricky, but UnderArmour, recent owners of the MapMyRun/Ride/Walk/Hike/Fitness franchise have a <a href="https://developer.underarmour.com">very generous API</a>, which allows 100,000 calls per day (and up to 25 per second). It is possible to get a list of routes in a particular region via an API call, but it is equally straightforward enough to just parse an HTML list: <br>
<code>http://www.mapmyrun.com/gb/belfast-nir/routes</code>.<br>
Each page is limited to 1,000 routes, but can be iterated through using <code>limit</code> and <code>offset</code>: <br>
<code>http://www.mapmyrun.com/gb/belfast-nir/routes?limit=3000&amp;offset=2000</code></p>

<p>GPX files (which are basically a list of longitude and latitude points) can be accessed via the UA API: <br>
<code>https://oauth2-api.mapmyapi.com/v7.1/route/&lt;route number&gt;/?field_set=detailed&amp;format=gpx</code><br>
The API requires certain headers to be sent, which can be achieved with the <code>httr::GET</code> command in <strong>R</strong> and the <code>add_headers</code> option. However, a complexity of the <code>httr::GET</code> command is that data is stored in memory (in binary form), and therefore must be written to disk in order to be used. Thus the full call is something along the lines of: <br>
<code>GET(paste0(fileUrl1,route_id,fileUrl2),add_headers("api-key" = &lt;my_api_key&gt;, "authorization" = "&lt;my_secret_key&gt;"), accept("application/gpx+xml"), write_disk(paste0("MapMyRun_", route_id, ".gpx")), progress())</code></p>

<p>Once the GPX files are obtained, the longitude and latitude points from each route can be stored in a data frame, and plotted with <code>ggplot2</code> or similar.</p>

<p>The shapefile used to give the background layer is courtesy of NISRA and subject to Crown Copyright.</p>
				</section>

				<footer class="footer-post">

					<section class="author-post">

						<div class="bio">
							<span>Autor</span>
							<h4 class="author-name">
								<a href="../author/paul/">Paul W</a>
							</h4>
						</div>
					</section>

					<section class="share">
						<h4>Share</h4>
						<a href="https://twitter.com/share?text=The%20highways%20&amp;%20byways%20of%20Belfast&amp;url=http://localhost:2368/the-highways-byways-of-belfast/" class="fa fa-twitter" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
							<span class="hidden">Twitter</span>
						</a>

						<a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:2368/the-highways-byways-of-belfast/" class="fa fa-facebook" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
							<span class="hidden">Facebook</span>
						</a>

						<a href="https://plus.google.com/share?url=http://localhost:2368/the-highways-byways-of-belfast/" class="fa fa-google-plus" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
							<span class="hidden">Google+</span>
						</a>
					</section>
				</footer>

				<section class="comments-post">
					<!-- Disqus Comments -->
					
				</section>

			</div>
		</article>
	</section>


	<footer class="blog-footer">
		<div class="inner">
			<p>All content is (c) 2015 Paul Woods. Published with <a href="http://ghost.org">Ghost.</a></p>
		</div>
	</footer>

	<!-- You can safely delete this line if your theme does not require jQuery -->
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>

	<script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>

	<script>

		//Menu Toggle
		$("#icon").click(function() {
		    $(this).toggleClass("active");
	        $("#menu").fadeToggle();
        });

		//Code Highlighter
        $(document).ready(function() {
          $('pre code').each(function(i, block) {
            hljs.highlightBlock(block);
          });
        });

        //Google Analytics

	</script>
	
</body>
